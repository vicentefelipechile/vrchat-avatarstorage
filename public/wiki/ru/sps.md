# SPS (Super Plug Shader)

<span class="badge badge-purple">ERP</span> <span class="badge badge-red">NSFW</span>

## Что это?
**SPS** (Super Plug Shader), иногда в просторечии называемый "SSP", — это бесплатная и современная система деформации сетки для VRChat, разработанная командой **VRCFury**. Она позволяет частям аватара реалистично деформироваться при взаимодействии с другими аватарами или объектами, заменяя старые и платные системы, такие как **DPS** (Dynamic Penetration System) и **TPS** [1].

## Зачем это нужно?
- **Реалистичная деформация:** Симулирует проникновение и физический контакт, деформируя сетку аватара.
- **Оптимизация:** Она намного легче и эффективнее старых систем.
- **Бесплатно:** В отличие от DPS, SPS полностью бесплатен и имеет открытый исходный код.
- **Совместимость:** Работает с большинством современных шейдеров (Poiyomi, LilToon и др.) и обратно совместима с аватарами, использующими DPS или TPS.

## Предварительные требования
Перед началом убедитесь, что у вас есть следующее:
- **Unity:** Рекомендуемая версия для VRChat.
- **VRChat SDK:** Установлен в вашем проекте (VCC).
- **VRCFury:** Установлен и обновлен до последней версии [2].
- **3D Модель:** Аватар с сетками, которые вы хотите анимировать (отверстия или пенетраторы).

## Пошаговое руководство по установке

SPS полностью управляется через инструменты VRCFury в Unity. Вам не нужно импортировать странные пакеты шейдеров или делать сложные ручные настройки анимации.

### Шаг 1: Установка VRCFury
Если у вас его еще нет, установите VRCFury из VRChat Creator Companion (VCC).
1. Откройте VCC.
2. Перейдите в "Manage Project".
3. Найдите "VRCFury" в списке пакетов и нажмите установить (или добавьте репозиторий, если он не отображается).

### Шаг 2: Создание Socket (Отверстие)
"Socket" — это приемник взаимодействия (рот и т.д.).

1. **Инструменты:** В верхней панели Unity перейдите в `Tools` > `VRCFury` > `SPS` > `Create Socket` [1].
2. **Размещение:** В вашей сцене появится новый объект.
   - Перетащите этот объект в иерархию вашего аватара и **сделайте его дочерним элементом соответствующей кости** (например, `Hip` или `Head`).
3. **Настройка:** Переместите и поверните объект Socket, чтобы он совпадал со входом в отверстие на вашей сетке.
   - Стрелка гизмо должна указывать **внутрь** отверстия.
   - Убедитесь, что тип Socket (в инспекторе) соответствует тому, что вы хотите (например, Vagina, Anal, Oral).
4. **Свет:** Вам не нужно настраивать ID света вручную; VRCFury делает это за вас.

> [!TIP]
> **Примечание по размещению (ERP)**
> Не размещайте точки (Sockets) слишком глубоко внутри аватара. Если "дыра" слишком глубокая, комфортно заниматься ERP становится сложно. Рекомендуется размещать их прямо у входа или немного снаружи.
>
> **Осторожно с большими пропорциями:** Если у вашего аватара очень широкие бедра или очень большая задница ("огромные задницы"), **выдвиньте Socket еще дальше наружу**. В противном случае другой человек столкнется с сеткой тела до того, как сможет "достичь" точки взаимодействия.

### Шаг 3: Создание Plug (Пенетратор)
"Plug" — это объект, который проникает и деформируется.

1. **Подготовка сетки:**
   - Убедитесь, что сетка вашего пенетратора "прямая" и "вытянутая" в состоянии покоя в Unity. SPS нужно знать общую длину.
   - Если вы переходите с DPS/TPS, убедитесь, что удалили старые скрипты или специальные материалы. Используйте обычный шейдер (Poiyomi) [1].
2. **Инструменты:** Перейдите в `Tools` > `VRCFury` > `SPS` > `Create Plug` [1].
3. **Размещение:**
   - **Вариант А (С костями):** Если у вашего пениса есть кости, перетащите объект Plug и сделайте его дочерним элементом **базовой кости** пениса.
   - **Вариант Б (Без костей):** Если это просто сетка (mesh renderer), перетащите объект Plug и бросьте его прямо на объект с **Mesh Renderer**.
4. **Конфигурация:**
   - В инспекторе компонента `VRCFury | SPS Plug` убедитесь, что **Renderer** — это сетка вашего пениса.
   - Настройте ориентацию: Изогнутая часть гизмо должна быть на кончике, а основание — в основании.
   - Настройте соответствующий **Type** (тип).

### Шаг 4: Тестирование в Unity
Вам не нужно загружать аватар, чтобы проверить, работает ли это.
1. Установите **Gesture Manager** из VCC [1].
2. Войдите в **Play Mode** в Unity.
3. Выберите Gesture Manager.
4. В эмулированном меню выражений перейдите к опциям SPS.
   - VRCFury автоматически генерирует тестовое меню с опциями для включения/выключения и проверки деформации.
   - Вы можете создать "Test Socket" из меню инструментов для проверки взаимодействия в реальном времени.

> [!WARNING]
> Предупреждение: Constraints (Констрейнты)
> Избегайте использования Unity Constraints на тех же костях, которые деформирует SPS, так как это может вызвать конфликты движения (дрожание) [4].

---

## Ссылки

[1] VRCFury. (n.d.). *SPS (Super Plug Shader)*. VRCFury Documentation. https://vrcfury.com/sps

[2] VRCFury. (n.d.). *Download & Install*. VRCFury Documentation. https://vrcfury.com/download

[3] VRCD. (n.d.). *SPS Tutorial*. VRCD. https://vrcd.org.cn

[4] VRCFury. (n.d.). *SPS Troubleshooting*. VRCFury Documentation. https://vrcfury.com/sps/troubleshooting
